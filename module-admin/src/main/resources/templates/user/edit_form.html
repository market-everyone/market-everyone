<!DOCTYPE html>
<html lang="en" th:replace="layout/base :: layout (~{::title}, ~{::content})" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>마켓에브리원-회원정보</title>
</head>

<body id="page-top">
<div class="container-fluid" th:fragment="content">

    <!-- Page Heading -->
    <h1 class="h3 mb-2 text-gray-800">사용자 정보</h1>
    <div class="container">
        <form method="post" th:action th:object="${user}">
        <div>
            <label>사용자 번호</label>
            <input class="form-control" id="userNo" readonly th:field="*{id}" type="text" value="1">
        </div>
        </br>
        <div>
            <label for="email">아이디</label>
            <input class="form-control" id="email"
                   readonly th:field="*{email}" type="text">
        </div>
        </br>
        <div>
            <label for="username">이름</label>
            <input class="form-control" id="username"
                    th:field="*{name}">
        </div>
        </br>
        <div>
            <label for="address">주소</label>
            <input class="form-control" id="address" name="address"
                    th:value="${user.address.address}">
        </div>
        </br>
        <div>
            <label for="detailAddress">상세주소</label>
            <input class="form-control" id="detailAddress" name="detailAddress"
                    th:value="${user.address.detailAddress}">
        </div>
        </br>
        <div>
            <label for="postCode">우편번호</label>
            <input class="form-control" id="postCode" name="postcode"
                    th:value="${user.address.postcode}">
        </div>
        </br>
        <div>
            <label for="phone">전화번호</label>
            <input class="form-control" id="phone"
                   th:field="*{phone}">
        </div>
        </br>
        <div>
            <label for="point">포인트</label>
            <input class="form-control" id="point"
                    th:field="*{point}">
        </div>
        </br>
        <div class="row">
            <div class="col">
                <button class="w-100 btn btn-primary btn-lg"
                        type="submit">수정
                </button>
            </div>
            <div class="col">
                <button class="w-100 btn btn-danger btn-lg" id="btn-delete" th:onclick="deleteUser()"
                        type="button">삭제
                </button>
            </div>
            <div class="col">
                <button class="w-100 btn btn-secondary btn-lg"
                        onclick="location.href='/'"
                        th:onclick="|location.href='@{/user}'|"
                        th:text="#{button.list}"
                        type="button">목록으로
                </button>
            </div>
        </div>
        </form>
        <script th:inline="javascript">
            function deleteUser() {
                let actionForm = $('form');
                let userNo = $('#userNo').val();
                actionForm
                    .attr('action', '/user/' + userNo + '/delete')
                    .attr('method', 'post');
                actionForm.submit();
            }
        </script>
    </div> <!-- /container -->
</div>
</body>
</html>